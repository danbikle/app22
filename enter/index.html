<!DOCTYPE html>
<html lang="en">
  <head>
    <meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
    <title>Demo of D3 enter(), exit(), svg-circle</title>
    <script src="/d3.v3.min.js"></script>
  </head>
  <!-- ref: -->
  <!-- https://medium.com/@c_behrens/enter-update-exit-6cafc6014c36 -->
  <body>
    <h1>Demo of D3 enter(), exit()</h1>
    <div id="scratchpad">Here is a div-element which I call #scratchpad</div>
    <br>
    <br>
    Here is my list:
    <br>
    <ul id="mylist">
      <li>1</li>
      <li>1</li>
      <li>1</li>
      <li>1</li>
    </ul>
    <script>
      var myarray = [15,8,42,4];
      // I should see myarray:
      var spad = document.getElementById("scratchpad").innerHTML;
      spad = spad + '<br />';
      document.getElementById("scratchpad").innerHTML = spad + 'myarray: '+myarray+' <br />';
      // Use D3 to create array, li_selection, from HTML. 
      var li_selection = d3.select("ul#mylist").selectAll("li");
      // I should use D3 to change li_selection.
      li_selection.text(function(d){return 'hello';});
      // 'Join' li_selection with myarray
      var joined_selection  = li_selection.data(myarray);
      // I should use D3 to 'Update' joined_selection.
      joined_selection.text(function(d){return d;});
      // Add a number to myarray
      myarray.push(9);
      // Now that myarray has been updated,
      // I should update the dependent D3 object:
      joined_selection  = li_selection.data(myarray);
      // I should call .enter() to deal with this number which just entered myarray.
      var bigger_selection = joined_selection.enter();
      var new_li = bigger_selection.append("li");
      new_li.text('HELLO');
      var new_datum = bigger_selection[0][4]['__data__'];
      new_li.text(new_datum);
      new_li.text('DAN');
      new_li.text(function(d){return d;});
      myarray
    </script>
  </body>
</html>
